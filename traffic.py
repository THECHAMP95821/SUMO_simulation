import traci
import os
import time  # Added for introducing delays

# Set SUMO_HOME environment variable
os.environ["SUMO_HOME"] = r"C:/Program Files (x86)/Eclipse/Sumo"

# Start SUMO with GUI
sumo_cmd = [
    r"C:\Program Files (x86)\Eclipse\Sumo\bin\sumo-gui",
    "-c", r"C:\Users\Parv Malhotra\Desktop\traffic\traffic.sumocfg"
]
traci.start(sumo_cmd)

# Set GUI speed (default 1.0x, lower is slower)
gui_speed = 0.1  # Adjust to control the speed (e.g., 0.5 for half-speed)

# Simulation step
step = 0
max_steps = 1000  # Run for 1000 steps

# Maintain a set of added vehicle IDs
added_vehicles = set()

# Dataset with dynamic vehicle data
dataset = [
{'number_of_vehicles_detected': 7, 'detected_vehicles': [{'vehicle_id': 1, 'vehicle_type': 'car', 'speed_info': {'kph': None, 'reliability': 0.0, 'direction_label': None, 'direction': None}}, {'vehicle_id': 2, 'vehicle_type': 'car', 'speed_info': {'kph': None, 'reliability': 0.0, 'direction_label': None, 'direction': None}}, {'vehicle_id': 3, 'vehicle_type': 'car', 'speed_info': {'kph': None, 'reliability': 0.0, 'direction_label': None, 'direction': None}}, {'vehicle_id': 4, 'vehicle_type': 'car', 'speed_info': {'kph': None, 'reliability': 0.0, 'direction_label': None, 'direction': None}}, {'vehicle_id': 5, 'vehicle_type': 'car', 'speed_info': {'kph': None, 'reliability': 0.0, 'direction_label': None, 'direction': None}}, {'vehicle_id': 6, 'vehicle_type': 'car', 'speed_info': {'kph': None, 'reliability': 0.0, 'direction_label': None, 'direction': None}}, {'vehicle_id': 7, 'vehicle_type': 'truck', 'speed_info': {'kph': None, 'reliability': 0.0, 'direction_label': None, 'direction': None}}]},
    
    {'number_of_vehicles_detected': 10, 'detected_vehicles': [{'vehicle_id': 1, 'vehicle_type': 'car', 'speed_info': {'kph': 1.5751573148995528, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.0963402267282525}}, {'vehicle_id': 2, 'vehicle_type': 'car', 'speed_info': {'kph': 4.447479300582081, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.01280513169042}}, {'vehicle_id': 3, 'vehicle_type': 'car', 'speed_info': {'kph': 4.4697268522323785, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.0375533674111233}}, {'vehicle_id': 5, 'vehicle_type': 'car', 'speed_info': {'kph': 2.4910123687656185, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.0378471295918694}}, {'vehicle_id': 6, 'vehicle_type': 'car', 'speed_info': {'kph': 4.07686306457306, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.291492329843613}}, {'vehicle_id': 7, 'vehicle_type': 'car', 'speed_info': {'kph': 5.971534668636727, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.1491881278798117}}, {'vehicle_id': 8, 'vehicle_type': 'car', 'speed_info': {'kph': 1.9745255406438424, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.1088304734678984}}, {'vehicle_id': 9, 'vehicle_type': 'car', 'speed_info': {'kph': 5.886128166551434, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.499511114693511}}, {'vehicle_id': 10, 'vehicle_type': 'car', 'speed_info': {'kph': 1.3266574257937982, 'reliability': 0.7, 'direction_label': 'Bottom', 'direction': 1.8705850643633326}}, {'vehicle_id': 11, 'vehicle_type': 'car', 'speed_info': {'kph': 6.818363450769514, 'reliability': 0.5, 'direction_label': 'Unknown', 'direction': 2.9995175827209875}}]},
{'number_of_vehicles_detected': 9, 'detected_vehicles': [{'vehicle_id': 1, 'vehicle_type': 'car', 'speed_info': {'kph': 1.6651369701593675, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.1891594433016244}}, {'vehicle_id': 2, 'vehicle_type': 'car', 'speed_info': {'kph': 4.14506154228904, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 1.9825830766521986}}, {'vehicle_id': 3, 'vehicle_type': 'car', 'speed_info': {'kph': 4.371056809533505, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.053157888297135}}, {'vehicle_id': 5, 'vehicle_type': 'car', 'speed_info': {'kph': 2.5911222877312676, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 1.987861356548841}}, {'vehicle_id': 6, 'vehicle_type': 'car', 'speed_info': {'kph': 4.144151722611497, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.2728755992913594}}, {'vehicle_id': 8, 'vehicle_type': 'car', 'speed_info': {'kph': 1.871955047336953, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.1996264257774822}}, {'vehicle_id': 9, 'vehicle_type': 'car', 'speed_info': {'kph': 4.117238390534247, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.432150415279399}}, {'vehicle_id': 10, 'vehicle_type': 'car', 'speed_info': {'kph': 2.0847752903633165, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.7715827651543292}}, {'vehicle_id': 11, 'vehicle_type': 'car', 'speed_info': {'kph': 2.0922196965607833, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.1409783491465277}}]},
{'number_of_vehicles_detected': 8, 'detected_vehicles': [{'vehicle_id': 1, 'vehicle_type': 'car', 'speed_info': {'kph': 1.6864783277062707, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.2711987050487619}}, {'vehicle_id': 2, 'vehicle_type': 'car', 'speed_info': {'kph': 4.141383119457059, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 1.9954431975491058}}, {'vehicle_id': 5, 'vehicle_type': 'car', 'speed_info': {'kph': 2.9826404574893, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 1.972552141013783}}, {'vehicle_id': 6, 'vehicle_type': 'car', 'speed_info': {'kph': 4.04062317358312, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.167996914387883}}, {'vehicle_id': 8, 'vehicle_type': 'car', 'speed_info': {'kph': 1.7542090441703546, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.2292631802741174}}, {'vehicle_id': 9, 'vehicle_type': 'car', 'speed_info': {'kph': 3.983791765517706, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.4244735110962923}}, {'vehicle_id': 10, 'vehicle_type': 'car', 'speed_info': {'kph': 2.129426909441999, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.863366147973668}}, {'vehicle_id': 11, 'vehicle_type': 'car', 'speed_info': {'kph': 2.0704685196270116, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.1845308471928875}}]},
{'number_of_vehicles_detected': 8, 'detected_vehicles': [{'vehicle_id': 1, 'vehicle_type': 'car', 'speed_info': {'kph': 1.814806884183418, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.3210690127493503}}, {'vehicle_id': 5, 'vehicle_type': 'car', 'speed_info': {'kph': 3.31188366875655, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.9284403326983013}}, {'vehicle_id': 6, 'vehicle_type': 'car', 'speed_info': {'kph': 4.647230027580313, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.1107716816971451}}, {'vehicle_id': 8, 'vehicle_type': 'car', 'speed_info': {'kph': 1.7559020112941917, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.2547412853816977}}, {'vehicle_id': 9, 'vehicle_type': 'car', 'speed_info': {'kph': 4.009717955412964, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.3958242589071308}}, {'vehicle_id': 10, 'vehicle_type': 'car', 'speed_info': {'kph': 2.135592492245703, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.881743142551778}}, {'vehicle_id': 11, 'vehicle_type': 'car', 'speed_info': {'kph': 1.9932572664350052, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.11972069279857}}, {'vehicle_id': 12, 'vehicle_type': 'car', 'speed_info': {'kph': 2.44868721990859, 'reliability': 0.5, 'direction_label': 'Bottom Right', 'direction': 0.48739946798321754}}]},
{'number_of_vehicles_detected': 7, 'detected_vehicles': [{'vehicle_id': 1, 'vehicle_type': 'car', 'speed_info': {'kph': 1.9745288041075821, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.3174338894858344}}, {'vehicle_id': 5, 'vehicle_type': 'car', 'speed_info': {'kph': 3.437118967802706, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 1.993140439739093}}, {'vehicle_id': 8, 'vehicle_type': 'car', 'speed_info': {'kph': 2.0093464096559703, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.271995624807476}}, {'vehicle_id': 9, 'vehicle_type': 'car', 'speed_info': {'kph': 3.8107931414319096, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.3451530715191775}}, {'vehicle_id': 10, 'vehicle_type': 'car', 'speed_info': {'kph': 2.2224928670701916, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.9514975437115687}}, {'vehicle_id': 11, 'vehicle_type': 'car', 'speed_info': {'kph': 2.062490442518492, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.0824160636341142}}, {'vehicle_id': 12, 'vehicle_type': 'car', 'speed_info': {'kph': 2.941021384824016, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.8046832961076128}}]},
{'number_of_vehicles_detected': 7, 'detected_vehicles': [{'vehicle_id': 1, 'vehicle_type': 'car', 'speed_info': {'kph': 2.271792475149912, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.3071856939494135}}, {'vehicle_id': 8, 'vehicle_type': 'car', 'speed_info': {'kph': 2.4164275502171693, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.2997874128979723}}, {'vehicle_id': 9, 'vehicle_type': 'car', 'speed_info': {'kph': 4.045781474619733, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.2817777015278808}}, {'vehicle_id': 10, 'vehicle_type': 'car', 'speed_info': {'kph': 2.4002268796571973, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.936898875072635}}, {'vehicle_id': 11, 'vehicle_type': 'car', 'speed_info': {'kph': 2.3107065446248907, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.0783367533844705}}, {'vehicle_id': 12, 'vehicle_type': 'car', 'speed_info': {'kph': 3.157083407337238, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.8597640483598807}}, {'vehicle_id': 14, 'vehicle_type': 'car', 'speed_info': {'kph': None, 'reliability': 0.5, 'direction_label': 'Unknown', 'direction': 2.879472117464408}}]},
{'number_of_vehicles_detected': 7, 'detected_vehicles': [{'vehicle_id': 1, 'vehicle_type': 'car', 'speed_info': {'kph': 2.5197298951659852, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.265580214939231}}, {'vehicle_id': 8, 'vehicle_type': 'car', 'speed_info': {'kph': 2.4903083676717994, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.3111640092871557}}, {'vehicle_id': 10, 'vehicle_type': 'car', 'speed_info': {'kph': 2.62238268042283, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.9549577522339519}}, {'vehicle_id': 11, 'vehicle_type': 'car', 'speed_info': {'kph': 2.4441202298518117, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.0681382835710935}}, {'vehicle_id': 12, 'vehicle_type': 'car', 'speed_info': {'kph': 3.8566689262894283, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.8732614651978045}}, {'vehicle_id': 14, 'vehicle_type': 'car', 'speed_info': {'kph': 1.981694297682683, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.805686085362026}}, {'vehicle_id': 15, 'vehicle_type': 'car', 'speed_info': {'kph': 2.385871429249714, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.386004432181925}}]},
{'number_of_vehicles_detected': 8, 'detected_vehicles': [{'vehicle_id': 1, 'vehicle_type': 'car', 'speed_info': {'kph': 2.7437122804078213, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.207955041675756}}, {'vehicle_id': 8, 'vehicle_type': 'car', 'speed_info': {'kph': 2.564880384765692, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.3393663026393687}}, {'vehicle_id': 10, 'vehicle_type': 'car', 'speed_info': {'kph': 2.8165033631291103, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 1.9877970846029458}}, {'vehicle_id': 11, 'vehicle_type': 'car', 'speed_info': {'kph': 2.6025220187172318, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.030650726237034}}, {'vehicle_id': 12, 'vehicle_type': 'car', 'speed_info': {'kph': 4.415877162373669, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.0676416226618322}}, {'vehicle_id': 14, 'vehicle_type': 'car', 'speed_info': {'kph': 1.978394839586641, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.0427229986358741}}, {'vehicle_id': 15, 'vehicle_type': 'car', 'speed_info': {'kph': 2.7150826177031093, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.798575956897807}}, {'vehicle_id': 16, 'vehicle_type': 'car', 'speed_info': {'kph': 2.7624465886266028, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.82301776269948}}]},
{'number_of_vehicles_detected': 11, 'detected_vehicles': [{'vehicle_id': 8, 'vehicle_type': 'car', 'speed_info': {'kph': 2.800226266358272, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.3273290358880923}}, {'vehicle_id': 10, 'vehicle_type': 'car', 'speed_info': {'kph': 3.7020738776749402, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.015792068119259}}, {'vehicle_id': 11, 'vehicle_type': 'car', 'speed_info': {'kph': 2.827446950101154, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.016045298969414}}, {'vehicle_id': 12, 'vehicle_type': 'car', 'speed_info': {'kph': 4.2880337509426125, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.1191874042981622}}, {'vehicle_id': 14, 'vehicle_type': 'car', 'speed_info': {'kph': 1.9740492454021594, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.0935629384603656}}, {'vehicle_id': 15, 'vehicle_type': 'car', 'speed_info': {'kph': 3.2159711141692764, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.8098614893505347}}, {'vehicle_id': 16, 'vehicle_type': 'car', 'speed_info': {'kph': 3.0420958133850755, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.9142237881523625}}, {'vehicle_id': 17, 'vehicle_type': 'car', 'speed_info': {'kph': 0.6019287663992826, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.4748968228780484}}, {'vehicle_id': 18, 'vehicle_type': 'car', 'speed_info': {'kph': 1.4999496976855429, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.763004181732376}}, {'vehicle_id': 19, 'vehicle_type': 'car', 'speed_info': {'kph': 0.8880947426387454, 'reliability': 0.7, 'direction_label': 'Bottom Right', 'direction': 0.6049356118029227}}, {'vehicle_id': 20, 'vehicle_type': 'car', 'speed_info': {'kph': None, 'reliability': 0.0, 'direction_label': None, 'direction': None}}]},
{'number_of_vehicles_detected': 9, 'detected_vehicles': [{'vehicle_id': 8, 'vehicle_type': 'car', 'speed_info': {'kph': 2.8615314709320274, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.2579753723704068}}, {'vehicle_id': 11, 'vehicle_type': 'car', 'speed_info': {'kph': 2.9373089169939566, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.0172922482630735}}, {'vehicle_id': 12, 'vehicle_type': 'car', 'speed_info': {'kph': 4.164841473843475, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.1511671899837055}}, {'vehicle_id': 14, 'vehicle_type': 'car', 'speed_info': {'kph': 1.9439750359925534, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.172794752613314}}, {'vehicle_id': 15, 'vehicle_type': 'car', 'speed_info': {'kph': 3.6082159372301295, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.8314018497622713}}, {'vehicle_id': 16, 'vehicle_type': 'car', 'speed_info': {'kph': 3.4006889583948183, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.8452738734303789}}, {'vehicle_id': 17, 'vehicle_type': 'car', 'speed_info': {'kph': 0.8275830972557304, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.4711518607406813}}, {'vehicle_id': 18, 'vehicle_type': 'bus', 'speed_info': {'kph': 1.8566658478024498, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.3762349915703536}}, {'vehicle_id': 20, 'vehicle_type': 'car', 'speed_info': {'kph': 2.4121512292838014, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.195763747361436}}]},
{'number_of_vehicles_detected': 10, 'detected_vehicles': [{'vehicle_id': 11, 'vehicle_type': 'car', 'speed_info': {'kph': 2.993197064469708, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.048098520363527}}, {'vehicle_id': 12, 'vehicle_type': 'car', 'speed_info': {'kph': 4.132299767155528, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.1608126590008006}}, {'vehicle_id': 14, 'vehicle_type': 'car', 'speed_info': {'kph': 2.1171302146760187, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.202094563396206}}, {'vehicle_id': 15, 'vehicle_type': 'car', 'speed_info': {'kph': 3.5213085618565336, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.8180697577860465}}, {'vehicle_id': 16, 'vehicle_type': 'car', 'speed_info': {'kph': 3.613499512958308, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.8884581777447849}}, {'vehicle_id': 17, 'vehicle_type': 'car', 'speed_info': {'kph': 0.9939715081478303, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.6802604156597714}}, {'vehicle_id': 18, 'vehicle_type': 'bus', 'speed_info': {'kph': 2.247610682754445, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.268151683739061}}, {'vehicle_id': 20, 'vehicle_type': 'car', 'speed_info': {'kph': 2.296095837690607, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 1.995262089058187}}, {'vehicle_id': 21, 'vehicle_type': 'car', 'speed_info': {'kph': 0.8990571922644667, 'reliability': 1.0, 'direction_label': 'Right', 'direction': 0.3515644929767267}}, {'vehicle_id': 19, 'vehicle_type': 'car', 'speed_info': {'kph': 0.7268699359446895, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.6492004633874012}}]},
{'number_of_vehicles_detected': 9, 'detected_vehicles': [{'vehicle_id': 12, 'vehicle_type': 'car', 'speed_info': {'kph': 4.128076582535177, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.1018164883649642}}, {'vehicle_id': 14, 'vehicle_type': 'car', 'speed_info': {'kph': 2.4855122999412065, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.2244684046767427}}, {'vehicle_id': 15, 'vehicle_type': 'car', 'speed_info': {'kph': 3.6667393285891636, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.8597154101605495}}, {'vehicle_id': 16, 'vehicle_type': 'car', 'speed_info': {'kph': 3.6529092832324555, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 1.966833055074802}}, {'vehicle_id': 17, 'vehicle_type': 'car', 'speed_info': {'kph': 1.3898544895033023, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.7319045785912632}}, {'vehicle_id': 18, 'vehicle_type': 'truck', 'speed_info': {'kph': 3.0185390509006145, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.1476251620860545}}, {'vehicle_id': 20, 'vehicle_type': 'car', 'speed_info': {'kph': 2.8246325330166293, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.165001255987398}}, {'vehicle_id': 21, 'vehicle_type': 'car', 'speed_info': {'kph': 1.370152759231486, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.7564608447279809}}, {'vehicle_id': 19, 'vehicle_type': 'car', 'speed_info': {'kph': 0.7801161499816579, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.6439656612781354}}]},
{'number_of_vehicles_detected': 11, 'detected_vehicles': [{'vehicle_id': 12, 'vehicle_type': 'car', 'speed_info': {'kph': 4.23757330428017, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.1141895407818927}}, {'vehicle_id': 14, 'vehicle_type': 'car', 'speed_info': {'kph': 2.7542016563466762, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.2383735249472754}}, {'vehicle_id': 15, 'vehicle_type': 'car', 'speed_info': {'kph': 3.779531279788812, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.910736646712456}}, {'vehicle_id': 16, 'vehicle_type': 'car', 'speed_info': {'kph': 3.723413931758121, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.0261399513892724}}, {'vehicle_id': 17, 'vehicle_type': 'car', 'speed_info': {'kph': 2.0723067007360494, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.7336701324280503}}, {'vehicle_id': 18, 'vehicle_type': 'truck', 'speed_info': {'kph': 3.163276626577573, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.1859311062047335}}, {'vehicle_id': 20, 'vehicle_type': 'car', 'speed_info': {'kph': 2.561036728529894, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.13482860585638}}, {'vehicle_id': 21, 'vehicle_type': 'car', 'speed_info': {'kph': 1.483983422038176, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.6758175401929113}}, {'vehicle_id': 19, 'vehicle_type': 'car', 'speed_info': {'kph': 1.0649657246357702, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.526498982842469}}, {'vehicle_id': 22, 'vehicle_type': 'car', 'speed_info': {'kph': 1.693973577324979, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.0773542733104085}}, {'vehicle_id': 23, 'vehicle_type': 'car', 'speed_info': {'kph': 1.5695004006431539, 'reliability': 0.5, 'direction_label': 'Bottom Right', 'direction': 1.1204971907447816}}]},
{'number_of_vehicles_detected': 8, 'detected_vehicles': [{'vehicle_id': 14, 'vehicle_type': 'car', 'speed_info': {'kph': 2.8681420169427843, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.1866382139464884}}, {'vehicle_id': 15, 'vehicle_type': 'car', 'speed_info': {'kph': 3.8546344166393336, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.0378574446756126}}, {'vehicle_id': 17, 'vehicle_type': 'car', 'speed_info': {'kph': 2.224329282523662, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.8109115300155867}}, {'vehicle_id': 18, 'vehicle_type': 'truck', 'speed_info': {'kph': 3.3004238481437134, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.2125674806968452}}, {'vehicle_id': 20, 'vehicle_type': 'car', 'speed_info': {'kph': 2.4708611262465094, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.137073006626594}}, {'vehicle_id': 21, 'vehicle_type': 'car', 'speed_info': {'kph': 1.4164925260748098, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.5680343112287536}}, {'vehicle_id': 19, 'vehicle_type': 'car', 'speed_info': {'kph': 1.0938704914462323, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.629282564762609}}, {'vehicle_id': 23, 'vehicle_type': 'car', 'speed_info': {'kph': 1.9377517128665447, 'reliability': 1.0, 'direction_label': 'Right', 'direction': 0.15480916513099907}}]},
{'number_of_vehicles_detected': 7, 'detected_vehicles': [{'vehicle_id': 15, 'vehicle_type': 'car', 'speed_info': {'kph': 3.893546333535048, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.0658039135880943}}, {'vehicle_id': 17, 'vehicle_type': 'car', 'speed_info': {'kph': 2.12989368329535, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.8417490246015689}}, {'vehicle_id': 18, 'vehicle_type': 'truck', 'speed_info': {'kph': 3.4464143319362472, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.2704659123534945}}, {'vehicle_id': 20, 'vehicle_type': 'car', 'speed_info': {'kph': 2.5091253733001664, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.121527226712488}}, {'vehicle_id': 21, 'vehicle_type': 'car', 'speed_info': {'kph': 1.4199981234507795, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.5306841315457622}}, {'vehicle_id': 19, 'vehicle_type': 'car', 'speed_info': {'kph': 1.2742015765745813, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.7132499643182534}}, {'vehicle_id': 23, 'vehicle_type': 'car', 'speed_info': {'kph': 1.5733909922455758, 'reliability': 1.0, 'direction_label': 'Right', 'direction': 0.31172691107387535}}]},
{'number_of_vehicles_detected': 6, 'detected_vehicles': [{'vehicle_id': 17, 'vehicle_type': 'car', 'speed_info': {'kph': 2.1788200739607912, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.9007953513400375}}, {'vehicle_id': 18, 'vehicle_type': 'truck', 'speed_info': {'kph': 3.6088745416750223, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.2429509741895528}}, {'vehicle_id': 20, 'vehicle_type': 'car', 'speed_info': {'kph': 2.569452299845927, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.0672675817489887}}, {'vehicle_id': 21, 'vehicle_type': 'car', 'speed_info': {'kph': 1.5164005220023282, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.5780754009192123}}, {'vehicle_id': 19, 'vehicle_type': 'car', 'speed_info': {'kph': 1.4992984956684172, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.8018766267252396}}, {'vehicle_id': 23, 'vehicle_type': 'car', 'speed_info': {'kph': 1.6413476366632354, 'reliability': 1.0, 'direction_label': 'Right', 'direction': 0.29368757164928244}}]},
{'number_of_vehicles_detected': 7, 'detected_vehicles': [{'vehicle_id': 17, 'vehicle_type': 'car', 'speed_info': {'kph': 2.2071435650436726, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.9346153198399647}}, {'vehicle_id': 18, 'vehicle_type': 'truck', 'speed_info': {'kph': 3.835426314152039, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.1866127321780737}}, {'vehicle_id': 20, 'vehicle_type': 'car', 'speed_info': {'kph': 2.6792358531354044, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.014450015596116}}, {'vehicle_id': 21, 'vehicle_type': 'car', 'speed_info': {'kph': 1.60941838766377, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.6155839533017485}}, {'vehicle_id': 19, 'vehicle_type': 'car', 'speed_info': {'kph': 1.5229774423647413, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.9378891812385051}}, {'vehicle_id': 23, 'vehicle_type': 'car', 'speed_info': {'kph': 1.5662613359416238, 'reliability': 1.0, 'direction_label': 'Right', 'direction': 0.37407338604934515}}, {'vehicle_id': 25, 'vehicle_type': 'car', 'speed_info': {'kph': 8.310961199023495, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.1600690980762167}}]},
{'number_of_vehicles_detected': 9, 'detected_vehicles': [{'vehicle_id': 17, 'vehicle_type': 'car', 'speed_info': {'kph': 2.290241025543596, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.9572105852452595}}, {'vehicle_id': 18, 'vehicle_type': 'truck', 'speed_info': {'kph': 3.828224498612436, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.1681105438441355}}, {'vehicle_id': 20, 'vehicle_type': 'car', 'speed_info': {'kph': 2.668247467217957, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.0151200859340874}}, {'vehicle_id': 21, 'vehicle_type': 'car', 'speed_info': {'kph': 1.7400001879304408, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.6525612276619946}}, {'vehicle_id': 19, 'vehicle_type': 'car', 'speed_info': {'kph': 1.6091126131415472, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.012178666256652}}, {'vehicle_id': 23, 'vehicle_type': 'car', 'speed_info': {'kph': 1.5821280351459248, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.465190684308009}}, {'vehicle_id': 25, 'vehicle_type': 'car', 'speed_info': {'kph': 4.800220254132162, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.4236560352401626}}, {'vehicle_id': 26, 'vehicle_type': 'car', 'speed_info': {'kph': 1.6721194696266133, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.202960879541376}}, {'vehicle_id': 28, 'vehicle_type': 'car', 'speed_info': {'kph': 9.491926479058932, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.954278873395544}}]},
{'number_of_vehicles_detected': 9, 'detected_vehicles': [{'vehicle_id': 17, 'vehicle_type': 'car', 'speed_info': {'kph': 2.3996819152529056, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.9469494381074253}}, {'vehicle_id': 18, 'vehicle_type': 'car', 'speed_info': {'kph': 4.098736603017382, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.0763764008867118}}, {'vehicle_id': 20, 'vehicle_type': 'car', 'speed_info': {'kph': 2.7645325954099214, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.0551389543484615}}, {'vehicle_id': 21, 'vehicle_type': 'car', 'speed_info': {'kph': 1.925960280826524, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.6758772441800671}}, {'vehicle_id': 19, 'vehicle_type': 'car', 'speed_info': {'kph': 1.681337809627465, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.0417769394014447}}, {'vehicle_id': 23, 'vehicle_type': 'car', 'speed_info': {'kph': 1.5491576374257485, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.6103414979695287}}, {'vehicle_id': 25, 'vehicle_type': 'car', 'speed_info': {'kph': 3.882528969270284, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.3666977054571752}}, {'vehicle_id': 26, 'vehicle_type': 'car', 'speed_info': {'kph': 1.1591530944961101, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.0942891296325907}}, {'vehicle_id': 29, 'vehicle_type': 'car', 'speed_info': {'kph': 2.452701735639839, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.6081565036099361}}]},
{'number_of_vehicles_detected': 10, 'detected_vehicles': [{'vehicle_id': 17, 'vehicle_type': 'car', 'speed_info': {'kph': 2.4410611205286656, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 1.964146646855695}}, {'vehicle_id': 21, 'vehicle_type': 'car', 'speed_info': {'kph': 2.094628571196461, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.6980730684572526}}, {'vehicle_id': 19, 'vehicle_type': 'car', 'speed_info': {'kph': 1.8034238109732295, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.0592240731184164}}, {'vehicle_id': 23, 'vehicle_type': 'car', 'speed_info': {'kph': 1.5278293026651975, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.7080145584359863}}, {'vehicle_id': 25, 'vehicle_type': 'car', 'speed_info': {'kph': 3.9361870012205746, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.3662247380703716}}, {'vehicle_id': 26, 'vehicle_type': 'car', 'speed_info': {'kph': 1.6508427525103417, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.957251632055805}}, {'vehicle_id': 29, 'vehicle_type': 'car', 'speed_info': {'kph': 2.2391534883212945, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.7427636005116025}}, {'vehicle_id': 30, 'vehicle_type': 'car', 'speed_info': {'kph': 0.7422872788348361, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.1989421355449785}}, {'vehicle_id': 31, 'vehicle_type': 'car', 'speed_info': {'kph': 4.953459611647583, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.8295499141583793}}, {'vehicle_id': 32, 'vehicle_type': 'car', 'speed_info': {'kph': 6.5374811140168445, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.9342475023525973}}]},
{'number_of_vehicles_detected': 11, 'detected_vehicles': [{'vehicle_id': 17, 'vehicle_type': 'car', 'speed_info': {'kph': 2.6148368133414435, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.0533124706496158}}, {'vehicle_id': 21, 'vehicle_type': 'car', 'speed_info': {'kph': 2.251039954650411, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.7636779834379437}}, {'vehicle_id': 19, 'vehicle_type': 'car', 'speed_info': {'kph': 1.8517448940497898, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.0735322526292452}}, {'vehicle_id': 23, 'vehicle_type': 'car', 'speed_info': {'kph': 1.543860866993881, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.776924174027866}}, {'vehicle_id': 25, 'vehicle_type': 'car', 'speed_info': {'kph': 3.7456614017383156, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.3643501683167802}}, {'vehicle_id': 26, 'vehicle_type': 'car', 'speed_info': {'kph': 1.7714190460601884, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 1.99960863157891}}, {'vehicle_id': 29, 'vehicle_type': 'car', 'speed_info': {'kph': 2.0721847847074595, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.8034713784760175}}, {'vehicle_id': 30, 'vehicle_type': 'car', 'speed_info': {'kph': 0.8563183993528534, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.079785602991576}}, {'vehicle_id': 31, 'vehicle_type': 'car', 'speed_info': {'kph': 5.068559134343294, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.7761585063195904}}, {'vehicle_id': 32, 'vehicle_type': 'car', 'speed_info': {'kph': 8.484187134940525, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.168381956859797}}, {'vehicle_id': 33, 'vehicle_type': 'car', 'speed_info': {'kph': 0.46211026862554744, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.1020556752256712}}]},
{'number_of_vehicles_detected': 11, 'detected_vehicles': [{'vehicle_id': 21, 'vehicle_type': 'car', 'speed_info': {'kph': 2.403983205852874, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.8360382948772254}}, {'vehicle_id': 19, 'vehicle_type': 'car', 'speed_info': {'kph': 1.9280262206805476, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.1162614942805857}}, {'vehicle_id': 23, 'vehicle_type': 'car', 'speed_info': {'kph': 1.5308739315765085, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.8336264560078014}}, {'vehicle_id': 25, 'vehicle_type': 'car', 'speed_info': {'kph': 3.498097928291454, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.3297906162229711}}, {'vehicle_id': 26, 'vehicle_type': 'car', 'speed_info': {'kph': 1.9282006603005668, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.001478963027736}}, {'vehicle_id': 29, 'vehicle_type': 'car', 'speed_info': {'kph': 2.1381339117200806, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.828843266813759}}, {'vehicle_id': 30, 'vehicle_type': 'car', 'speed_info': {'kph': 1.15285239031179, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.1068002894584115}}, {'vehicle_id': 31, 'vehicle_type': 'car', 'speed_info': {'kph': 4.738883154688019, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.8194431473415484}}, {'vehicle_id': 32, 'vehicle_type': 'car', 'speed_info': {'kph': 8.170643259797863, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.318041830982279}}, {'vehicle_id': 33, 'vehicle_type': 'car', 'speed_info': {'kph': 1.0275574764400908, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.49043716268761123}}, {'vehicle_id': 34, 'vehicle_type': 'car', 'speed_info': {'kph': 1.3181078742947336, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.3224152402903386}}]},
{'number_of_vehicles_detected': 10, 'detected_vehicles': [{'vehicle_id': 21, 'vehicle_type': 'car', 'speed_info': {'kph': 2.5491610527593678, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.8732254331824798}}, {'vehicle_id': 19, 'vehicle_type': 'car', 'speed_info': {'kph': 2.0923556040577354, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.1294948059739762}}, {'vehicle_id': 23, 'vehicle_type': 'car', 'speed_info': {'kph': 1.5683483956247128, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.9196823153379764}}, {'vehicle_id': 26, 'vehicle_type': 'car', 'speed_info': {'kph': 1.972660551118335, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.0794870338669433}}, {'vehicle_id': 29, 'vehicle_type': 'car', 'speed_info': {'kph': 2.261988777410471, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.8947349723743518}}, {'vehicle_id': 30, 'vehicle_type': 'car', 'speed_info': {'kph': 1.2121651768439543, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.0798489476515825}}, {'vehicle_id': 31, 'vehicle_type': 'car', 'speed_info': {'kph': 4.47952428306666, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.8614288580754386}}, {'vehicle_id': 32, 'vehicle_type': 'car', 'speed_info': {'kph': 7.270167335842414, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.2723439384329436}}, {'vehicle_id': 33, 'vehicle_type': 'car', 'speed_info': {'kph': 1.0290956523294539, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.4592715849164911}}, {'vehicle_id': 34, 'vehicle_type': 'car', 'speed_info': {'kph': 1.197054199609174, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.3844953417249464}}]},
{'number_of_vehicles_detected': 8, 'detected_vehicles': [{'vehicle_id': 19, 'vehicle_type': 'car', 'speed_info': {'kph': 2.1157877477726936, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.123516346491621}}, {'vehicle_id': 23, 'vehicle_type': 'car', 'speed_info': {'kph': 1.643222787405917, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.9856999717559741}}, {'vehicle_id': 26, 'vehicle_type': 'car', 'speed_info': {'kph': 2.313209021619836, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 1.978331574718454}}, {'vehicle_id': 29, 'vehicle_type': 'car', 'speed_info': {'kph': 2.43558284660864, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.916833647923584}}, {'vehicle_id': 30, 'vehicle_type': 'car', 'speed_info': {'kph': 1.3619742021280496, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.0153473341363803}}, {'vehicle_id': 31, 'vehicle_type': 'car', 'speed_info': {'kph': 4.248178894570654, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.9393478504343802}}, {'vehicle_id': 33, 'vehicle_type': 'car', 'speed_info': {'kph': 1.2311075415719996, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.4671718623309788}}, {'vehicle_id': 34, 'vehicle_type': 'car', 'speed_info': {'kph': 1.3315494100853735, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.3484853173346774}}]},
{'number_of_vehicles_detected': 8, 'detected_vehicles': [{'vehicle_id': 19, 'vehicle_type': 'car', 'speed_info': {'kph': 2.40570974875852, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.1231101025625478}}, {'vehicle_id': 23, 'vehicle_type': 'car', 'speed_info': {'kph': 1.7142530925902266, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.0138361941237033}}, {'vehicle_id': 26, 'vehicle_type': 'car', 'speed_info': {'kph': 2.687256643253817, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.0071210732016134}}, {'vehicle_id': 29, 'vehicle_type': 'car', 'speed_info': {'kph': 2.592604989258597, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.900174063828377}}, {'vehicle_id': 30, 'vehicle_type': 'car', 'speed_info': {'kph': 1.456942501128397, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.0230222838458742}}, {'vehicle_id': 33, 'vehicle_type': 'car', 'speed_info': {'kph': 1.2887825500230214, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.46840208606726763}}, {'vehicle_id': 34, 'vehicle_type': 'car', 'speed_info': {'kph': 1.3747211599510618, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.357459923865907}}, {'vehicle_id': 36, 'vehicle_type': 'car', 'speed_info': {'kph': 3.7316028600894424, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.3873219423151393}}]},
{'number_of_vehicles_detected': 7, 'detected_vehicles': [{'vehicle_id': 23, 'vehicle_type': 'car', 'speed_info': {'kph': 1.8099234821498307, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.0711737382351803}}, {'vehicle_id': 26, 'vehicle_type': 'car', 'speed_info': {'kph': 2.695216864220249, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.0185495408493646}}, {'vehicle_id': 29, 'vehicle_type': 'car', 'speed_info': {'kph': 2.613247869258789, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.9425560101608486}}, {'vehicle_id': 30, 'vehicle_type': 'car', 'speed_info': {'kph': 1.5784536354321477, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.0638056955505446}}, {'vehicle_id': 33, 'vehicle_type': 'car', 'speed_info': {'kph': 1.292924576184633, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.4856914504053751}}, {'vehicle_id': 34, 'vehicle_type': 'car', 'speed_info': {'kph': 1.4158426117510552, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.287861326254434}}, {'vehicle_id': 36, 'vehicle_type': 'car', 'speed_info': {'kph': 4.1748854087079375, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.8193360227321886}}]},
{'number_of_vehicles_detected': 7, 'detected_vehicles': [{'vehicle_id': 23, 'vehicle_type': 'car', 'speed_info': {'kph': 1.929627011306204, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.135418596628496}}, {'vehicle_id': 26, 'vehicle_type': 'car', 'speed_info': {'kph': 2.779145580667523, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.031946520907597}}, {'vehicle_id': 29, 'vehicle_type': 'car', 'speed_info': {'kph': 2.899435711376468, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 1.9912799273472497}}, {'vehicle_id': 30, 'vehicle_type': 'car', 'speed_info': {'kph': 1.6230612571510588, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.1178223480724816}}, {'vehicle_id': 33, 'vehicle_type': 'car', 'speed_info': {'kph': 1.32422229147898, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.5367561017105503}}, {'vehicle_id': 34, 'vehicle_type': 'truck', 'speed_info': {'kph': 1.3947522729763655, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.134776528190406}}, {'vehicle_id': 36, 'vehicle_type': 'car', 'speed_info': {'kph': 3.6664690502861306, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.8799463323761882}}]},
{'number_of_vehicles_detected': 6, 'detected_vehicles': [{'vehicle_id': 23, 'vehicle_type': 'car', 'speed_info': {'kph': 1.99478419093705, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.151676773147138}}, {'vehicle_id': 26, 'vehicle_type': 'car', 'speed_info': {'kph': 2.8607208509892486, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.0381907446342535}}, {'vehicle_id': 30, 'vehicle_type': 'car', 'speed_info': {'kph': 1.6618403943192126, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.1668405888937141}}, {'vehicle_id': 33, 'vehicle_type': 'truck', 'speed_info': {'kph': 1.3398148607593403, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.6523691397293996}}, {'vehicle_id': 34, 'vehicle_type': 'bus', 'speed_info': {'kph': 1.4076869629732889, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.929435480792311}}, {'vehicle_id': 36, 'vehicle_type': 'car', 'speed_info': {'kph': 3.4924904308923264, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.9137226869848818}}]},
{'number_of_vehicles_detected': 6, 'detected_vehicles': [{'vehicle_id': 23, 'vehicle_type': 'car', 'speed_info': {'kph': 2.0171012772198904, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.1487388492347037}}, {'vehicle_id': 26, 'vehicle_type': 'car', 'speed_info': {'kph': 3.365509715484273, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.1004067200704744}}, {'vehicle_id': 30, 'vehicle_type': 'car', 'speed_info': {'kph': 1.7232417975332768, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.2026516994748133}}, {'vehicle_id': 33, 'vehicle_type': 'truck', 'speed_info': {'kph': 1.3935810151292631, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.7852374582557757}}, {'vehicle_id': 34, 'vehicle_type': 'bus', 'speed_info': {'kph': 1.4844262568951747, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.9520352825464706}}, {'vehicle_id': 36, 'vehicle_type': 'car', 'speed_info': {'kph': 3.465304384328415, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.8652967488765217}}]},
{'number_of_vehicles_detected': 6, 'detected_vehicles': [{'vehicle_id': 26, 'vehicle_type': 'car', 'speed_info': {'kph': 3.431872475484207, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 2.116513096875494}}, {'vehicle_id': 30, 'vehicle_type': 'car', 'speed_info': {'kph': 1.8760299127987343, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.2149302699081763}}, {'vehicle_id': 33, 'vehicle_type': 'car', 'speed_info': {'kph': 1.7344854008622568, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.9343747614127049}}, {'vehicle_id': 34, 'vehicle_type': 'truck', 'speed_info': {'kph': 1.667986284950249, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.872477726961867}}, {'vehicle_id': 36, 'vehicle_type': 'car', 'speed_info': {'kph': 3.660296422921805, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.9202470691548792}}, {'vehicle_id': 37, 'vehicle_type': 'car', 'speed_info': {'kph': 0.7695214463265121, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.6038042125539586}}]},
{'number_of_vehicles_detected': 6, 'detected_vehicles': [{'vehicle_id': 30, 'vehicle_type': 'car', 'speed_info': {'kph': 1.992991470882767, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.1978645234144418}}, {'vehicle_id': 33, 'vehicle_type': 'car', 'speed_info': {'kph': 2.112039525229177, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 1.061456374870727}}, {'vehicle_id': 34, 'vehicle_type': 'car', 'speed_info': {'kph': 2.026834014176393, 'reliability': 1.0, 'direction_label': 'Bottom', 'direction': 1.8956744924039808}}, {'vehicle_id': 36, 'vehicle_type': 'car', 'speed_info': {'kph': 3.601300538692912, 'reliability': 1.0, 'direction_label': 'Bottom Left', 'direction': 1.993770938373582}}, {'vehicle_id': 37, 'vehicle_type': 'car', 'speed_info': {'kph': 0.732997446959553, 'reliability': 1.0, 'direction_label': 'Bottom Right', 'direction': 0.9941436774381076}}, {'vehicle_id': 38, 'vehicle_type': 'car', 'speed_info': {'kph': 3.4153221407934096, 'reliability': 0.5, 'direction_label': 'Bottom', 'direction': 1.7862772498035395}}]},

]

# Flatten dataset to track vehicles
vehicles_to_add = []
for entry in dataset:
    vehicles_to_add.extend(entry['detected_vehicles'])

while step < max_steps:
    print(f"Simulation step: {step}")  # Debugging step

    # Advance simulation
    traci.simulationStep()

    # Slow down the simulation using time.sleep()
    time.sleep(gui_speed)  # Introduce delay to make simulation slower

    # Add vehicles dynamically
    for vehicle in vehicles_to_add:
        vehicle_id = str(vehicle['vehicle_id'])
        vehicle_type = vehicle['vehicle_type']
        speed = vehicle['speed_info']['kph'] or 0  # Default to 0 if speed is None
        speed_mps = speed / 3.6

        # Add vehicle only if it hasn't been added
        if vehicle_id not in added_vehicles:
            try:
                print(f"Adding vehicle {vehicle_id} at step {step} with speed {speed} kph")  # Debug
                traci.vehicle.add(vehID=vehicle_id, routeID="route1to2", typeID=vehicle_type)
                traci.vehicle.setSpeed(vehicle_id, speed / 3.6)  # Convert kph to m/s
                added_vehicles.add(vehicle_id)  # Mark vehicle as added
            except traci.TraCIException as e:
                print(f"Error adding vehicle {vehicle_id}: {e}")
        else:
        # Update vehicle speed if it already exists
            try:
                current_speed = traci.vehicle.getSpeed(vehicle_id)
                if abs(current_speed - speed_mps) > 0.01:  # Check for significant difference
                    print(f"Updating speed of vehicle {vehicle_id} from {current_speed * 3.6:.2f} kph to {speed} kph")  # Debug
                    traci.vehicle.setSpeed(vehicle_id, speed_mps)
            except traci.TraCIException as e:
                print(f"Error updating speed for vehicle {vehicle_id}: {e}")

    # Optionally: Print all active vehicles in the simulation
    active_vehicles = traci.vehicle.getIDList()
    print(f"Active vehicles: {active_vehicles}")

    # Increment step
    step += 1

# Close the simulation
traci.close()
